<section>
    <div class="container p-10">
        <h2 class="text-2xl my-4 text-main font-semibold">Register Now:</h2>
        <form class="space-y-4" [formGroup]="registerForm" (ngSubmit)="registerFormSubmit()">
            <div>
                <label class="font-semibold" for="name">name:</label>
                <div class="relative">
                    <input formControlName="name" class="border rounded-md p-1.5 w-full" type="text" id="name" name="userName">
                    @if((registerForm.get("name")?.touched || registerForm.get("name")?.dirty)){
                        @if(registerForm.get("name")?.valid){
                            <span class="absolute bg-green-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-check"></i></span>
                        }
                        @else{
                            <span class="absolute bg-red-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-xmark"></i></span>
                        }
                    }
                </div>
                @if(registerForm.get("name")?.errors && (registerForm.get("name")?.touched || registerForm.get("name")?.dirty)){
                    <div class="bg-rose-300 border border-rose-800 p-5 rounded-md font-bold capitalize">
                        @if(registerForm.get("name")?.getError("required")){
                            <p>name is required</p>
                        }
                        @if(registerForm.get("name")?.getError("minlength")){
                            <p>min length of name is 3</p>
                        }
                        @if(registerForm.get("name")?.getError("maxlength")){
                            <p>max length of name is 20</p>
                        }
                    </div>
                }
            </div>
            <div>
                <label class="font-semibold" for="email">email:</label>
                <div class="relative">
                    <input formControlName="email" class="border rounded-md p-1.5 w-full" type="email" id="email" name="userEmail">
                    @if(registerForm.get("email")?.touched || registerForm.get("email")?.dirty){
                        @if(registerForm.get("email")?.valid){
                            <span class="absolute bg-green-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-check"></i></span>
                        }
                        @else{
                            <span class="absolute bg-red-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-xmark"></i></span>
                        }
                    }
                </div>
                @if(registerForm.get("email")?.errors && (registerForm.get("email")?.touched || registerForm.get("email")?.dirty)){
                    <div class="bg-rose-300 border border-rose-800 p-5 rounded-md font-bold capitalize">
                        @if(registerForm.get("email")?.getError("required")){
                            <p>email is required</p>
                        }
                        @if(registerForm.get("email")?.getError("email")){
                            <p>must be of email form</p>
                        }
                    </div>
                }
            </div>
            <div>
                <label class="font-semibold" for="password">password:</label>
                <div class="relative">
                    <input formControlName="password" class="border rounded-md p-1.5 w-full" type="password" id="password" name="userPassword">
                    @if(registerForm.get("password")?.touched || registerForm.get("password")?.dirty){
                        @if(registerForm.get("password")?.valid){
                            <span class="absolute bg-green-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-check"></i></span>
                        }
                        @else{
                            <span class="absolute bg-red-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-xmark"></i></span>
                        }
                    }
                </div>
                @if(registerForm.get("password")?.errors && (registerForm.get("password")?.touched || registerForm.get("password")?.dirty)){
                    <div class="bg-rose-300 border border-rose-800 p-5 rounded-md font-bold capitalize">
                        @if(registerForm.get("password")?.getError("required")){
                            <p>password is required</p>
                        }
                        @if(registerForm.get("password")?.getError("pattern")){
                            <p>must contain 6 characters or more</p>
                        }
                    </div>
                }
            </div>
            <div>
                <label class="font-semibold" for="re-password">rePassword:</label>
                <div class="relative">
                    <input formControlName="rePassword" class="border rounded-md p-1.5 w-full" type="password" id="re-password" name="userRe-password">
                    @if(registerForm.get("rePassword")?.touched || registerForm.get("rePassword")?.dirty){
                        @if(!registerForm.getError("mismatch")){
                            <span class="absolute bg-green-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-check"></i></span>
                        }
                        @else{
                            <span class="absolute bg-red-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-xmark"></i></span>
                        }
                    }
                </div>
                @if((registerForm.get("rePassword")?.touched || registerForm.get("rePassword")?.dirty) && registerForm.getError("mismatch")){
                    <div class="bg-rose-300 border border-rose-800 p-5 rounded-md font-bold capitalize">
                        <p>rePassword must be same as the password</p>
                    </div>
                }
            </div>
            <div>
                <label class="font-semibold" for="phone">phone:</label>
                <div class="relative">
                    <input formControlName="phone" class="border rounded-md p-1.5 w-full" type="tel" id="phone" name="userPhone">
                    @if(registerForm.get("phone")?.touched || registerForm.get("phone")?.dirty){
                        @if(registerForm.get("phone")?.valid){
                            <span class="absolute bg-green-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-check"></i></span>
                        }
                        @else{
                            <span class="absolute bg-red-500 w-8 h-8 flex justify-center items-center rounded-full right-5 top-1/2 -translate-y-1/2 text-white"><i class="fa-solid fa-xmark"></i></span>
                        }
                    }
                </div>
                @if(registerForm.get("phone")?.errors && (registerForm.get("phone")?.touched || registerForm.get("phone")?.dirty)){
                    <div class="bg-rose-300 border border-rose-800 p-5 rounded-md font-bold capitalize">
                        @if(registerForm.get("phone")?.getError("required")){
                            <p>phone is required</p>
                        }
                        @if(registerForm.get("phone")?.getError("pattern")){
                            <p>phone must be valid egyptian number</p>
                        }
                    </div>
                }
            </div>
            <div>
                <button type="submit" [disabled]="isLoading" class="btn-main ms-auto block">
                    Register
                    @if(isLoading){
                        <span><i class="fa-solid fa-spin fa-spinner"></i></span>
                    }
                </button>
                @if(isAccountExistError){
                    <div class="bg-rose-300 border border-rose-800 p-5 rounded-md font-bold capitalize">
                        <p>{{isAccountExistError}}</p>
                    </div>
                }
                @if(messageSuccess){
                    <div class="bg-green-300 border border-green-800 p-5 rounded-md font-bold capitalize">
                        <p>Register Success ðŸ˜€!</p>
                    </div>
                }
            </div>
        </form>
    </div>
</section>